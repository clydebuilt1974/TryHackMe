# Active Firectory Basics
## Windows Domains
* Windows domain is the group of users and computers under administration of a given business.
* **Active Directory (AD)**.
  * Centralises administration of common components (credentials) of Windows network in single repository.
* **Domain Controller (DC)**.
  * Server that runs AD services.
* Main advantges of Windows domain.
  * **Centralised identity management**.
    * All users can be configured from AD with minimal effort.    
  * **Centralised security policies**.
    * Policies configured directly from AD and applied to users and computers as needed.
## Active Directory
* **Active Directory Domain Service (AD DS)**.
  * Core of any Windows domain.
  * Acts as catalogue that holds information of all "objects".
    * Users, groups, machines, printers, shares, etc.
#### Users
* One of the objects known as **security principles**.
  * Can be authenticated by Windows domain.
  * Can be assigned privileges over **resources**.
    * E.g. files or printers. ## Managing Users in AD
* Can represent two entity types.
  * **People**.
    * E.g. employees.
  * **Services**.
    * Only have privileges needed to run their specific service.
    * E.g. IIS or SQL.
#### Machines
* Machine object created for every computer that joins AD domain.
* Also considered security principles.
* Created account has limited rights within domain.
* Account is local administrator on assigned computer.
  * Passwords are automatically rotated out.
  * Generally 120 random characters.
* Account mane is computer's name followed by dollar sign.
### Security Groups
* Define user groups to assign rights to resources.
* Allows better manageability as added users automatically inherit all group's privileges.
* Considered security principles.
* Can contain users, machines and other groups as members.

#### Important domain groups created by default

| Security Group | Description
| --- | --- 
| Domain Admins | Administrative privileges over entire domain. 
| Server Operators | Can administer DCs. Cannot change any administrative group memberships.
| Backup Operators | Can access any file, ignoring their permissions. Used to perfrom backups of computer data.
| Account Operators | Can create or modify othe domain accounts.
| Domain Users | All existing user accounts in the domain.
| Domain Computers | All existing computers in the domain
| Domain Controllers | All existing DCs in the domain

* [Complete list of default security groups](https://docs.microsoft.com/en-us/windows/security/identity-protection/access-control/active-directory-security-groups).
### Active Directory Users and Computers
* Software used to configure security principles.
* Displays hierarchy of objects that exist in domain.
* **Organisational Units (OUs)** are container objects used to classify users and machines.
  * User can only be a member of single OU.
  * Mainly used to define sets of users with similar policing requirements.
    * E.g. IT, Management, Marketing, R&D, Sales.

#### OUs automatically created by Windows

| Container | Description
| --- | ---
| Builtin | Contains default groups available to any Windows host.
| Computers | Any machine joining the domain is put here by default.
| Domain Controllers | Contains DCs by default.
| Users | Default users and groups that apply to domin-wide context.
| Managed Service Accounts | Accounts used by services within the Windows domain.

### Security Groups vs OUs
* **OUs** used for **applying policies** to users and computers.
* **Security Groups** used to **grant permissions over resources**.

## Managing Users in AD
### Delegation
* Grant specific users specific privileges to perfrom advanced tasks over an OU.
  * E.g. allow IT OU privileges to reset other low-privilege user passwords.
* PowerShell can be used if delegated user has no acces to Active Directory Users and Computers.
```
Set-ADAcountPassword sophie -Rest -NewPassword (Read-Host -AsSecureString -Prompt 'New Password') - Verbose
```
* Force user password reset at next login using PowerShell.
```
Set-ADUser -ChangePasswordAtLogin $true -Identity sophie -Verbose
```

## Managing Computers in AD
* Segregate devices according to their use.
#### Workstations
* Most common devices within AD domain.
* Should never have privileged users signed into them.
#### Servers
* Second most common device within AD domain.
* Provide services to users or other servers.
#### DCs
* Allow management of AD domain.
* Most sensitive devices within network.
  * Contain hashed passwords for all accounts.

## Group Policies
* 
## Authentication Methods
## Trees, Forests and Trusts
## Conclusion
